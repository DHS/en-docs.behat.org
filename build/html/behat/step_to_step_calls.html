

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Calling Steps from Step Definitions &mdash; Behat v1.1.0 documentation</title>
    <link rel="stylesheet" href="../_static/scrolls.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/behat.css" type="text/css" />
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Lobster" type="text/css" />
    <link rel="stylesheet" href="../_static/print.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/theme_extras.js"></script>
    <link rel="top" title="Behat v1.1.0 documentation" href="../index.html" />
    <link rel="next" title="Step Argument Transformations" href="transformations.html" />
    <link rel="prev" title="Hooks" href="hooks.html" /> 
  </head>
  <body>
    <header>
        <a id="logo" href="http://behat.org">Behat</a>
        <nav>
            <ul>
                <li><a href="http://behat.org">main</a></li>
                <li class="active"><a href="http://docs.behat.org">docs</a></li>
                <li><a href="http://pear.behat.org">pear</a></li>
                <li><a href="https://github.com/Behat">github</a></li>
            </ul>
        </nav>
    </header>

    <section class="docs">

        <nav class="toc">
            <h3>Navigation</h3>
            <ul class="nav">
                <li><a href="../index.html">Behat Documentation</a></li>
                    <li><a href="hooks.html">Hooks</a> (prev)</li>
                    <li>
                        <a href="#">
                            Calling Steps from Step Definitions
                        </a> (cur)
                    </li>
                    <li><a href="transformations.html">Step Argument Transformations</a> (next)</li>
            </ul>

            <h3>Table Of Contents</h3>
            <ul>
<li><a class="reference internal" href="#">Calling Steps from Step Definitions</a></li>
</ul>

        </nav>

        <section class="documentation">
            
  <div class="section" id="calling-steps-from-step-definitions">
<h1>Calling Steps from Step Definitions<a class="headerlink" href="#calling-steps-from-step-definitions" title="Permalink to this headline">Â¶</a></h1>
<p>It is possible to call steps from other <a class="reference internal" href="../gherkin/steps.html"><em>Steps &amp; Step Definitions</em></a>:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
<span class="c1">// features/steps/istep_call_steps.php</span>

<span class="nv">$steps</span><span class="o">-&gt;</span><span class="na">Given</span><span class="p">(</span><span class="s1">&#39;/^the user (.*) exists$/&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$world</span><span class="p">,</span> <span class="nv">$name</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">});</span>

<span class="nv">$steps</span><span class="o">-&gt;</span><span class="na">Given</span><span class="p">(</span><span class="s1">&#39;/^I log in as (.*)$/&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$world</span><span class="p">,</span> <span class="nv">$name</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">});</span>

<span class="nv">$steps</span><span class="o">-&gt;</span><span class="na">Given</span><span class="p">(</span><span class="s1">&#39;/^(.*) is logged in$/&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$world</span><span class="p">,</span> <span class="nv">$name</span><span class="p">)</span> <span class="k">use</span><span class="p">(</span><span class="nv">$steps</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$steps</span><span class="o">-&gt;</span><span class="na">Given</span><span class="p">(</span><span class="s2">&quot;the user </span><span class="si">$name</span><span class="s2"> exists&quot;</span><span class="p">,</span> <span class="nv">$world</span><span class="p">);</span>
    <span class="nv">$steps</span><span class="o">-&gt;</span><span class="na">Given</span><span class="p">(</span><span class="s2">&quot;I log in as </span><span class="si">$name</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nv">$world</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Invoking steps from step definitions is practical if you have several common steps that you want to perform in several scenarios. Or simply if you want to make your scenarios shorter and more declarative. This allows you to do this in a Scenario:</p>
<div class="highlight-gherkin"><div class="highlight"><pre><span class="k">Feature:</span><span class="nf"></span>

<span class="nf">    </span><span class="k">Scenario:</span><span class="nf"> View last incidents</span>
<span class="k">      Given </span><span class="nf">Linda is logged in          </span><span class="c"># This will in fact invoke 2 step definitions</span><span class="nf"></span>
<span class="nf">      </span><span class="k">When </span><span class="nf">I go to the incident page</span>
</pre></div>
</div>
<p>Instead of having a lot of repetition:</p>
<div class="highlight-gherkin"><div class="highlight"><pre><span class="k">Feature:</span><span class="nf"></span>

<span class="nf">    </span><span class="k">Scenario:</span><span class="nf"> View last incidents</span>
<span class="k">      Given </span><span class="nf">the user Linda exists</span>
<span class="nf">      </span><span class="k">And </span><span class="nf">I log in as Linda</span>
<span class="nf">      </span><span class="k">When </span><span class="nf">I go to the incident page</span>
</pre></div>
</div>
<p>You can even pass arguments to inner steps:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
<span class="c1">// features/steps/istep_calls_with_args_steps.php</span>

<span class="nv">$steps</span><span class="o">-&gt;</span><span class="na">Given</span><span class="p">(</span><span class="s1">&#39;/^(.*) is logged in with:$/&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$world</span><span class="p">,</span> <span class="nv">$name</span><span class="p">,</span> <span class="nv">$table</span><span class="p">)</span> <span class="k">use</span><span class="p">(</span><span class="nv">$steps</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$steps</span><span class="o">-&gt;</span><span class="na">Given</span><span class="p">(</span><span class="s2">&quot;the user </span><span class="si">$name</span><span class="s2"> exists&quot;</span><span class="p">,</span> <span class="nv">$world</span><span class="p">);</span>
    <span class="nv">$steps</span><span class="o">-&gt;</span><span class="na">Given</span><span class="p">(</span><span class="s2">&quot;I log in as </span><span class="si">$name</span><span class="s2"> with:&quot;</span><span class="p">,</span> <span class="nv">$world</span><span class="p">,</span> <span class="nv">$table</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</div>


        </section>

        <footer>
            <nav>
                    &laquo; <a href="hooks.html">Hooks</a> |
                    <a href="#">
                        Calling Steps from Step Definitions
                    </a>
                    | <a href="transformations.html">Step Argument Transformations</a> &raquo;
            </nav>
        </footer>

    </section>

    <footer>
        <dl>
            <dt>Docs</dt>
            <dd><a href="http://docs.behat.org/en/quick_intro.html">Quick Intro</a></dd>
            <dd><a href="http://docs.behat.org/en/index.html">Behat</a></dd>
            <dd><a href="http://docs.behat.org/api/gherkin/index.html">Gherkin API</a></dd>
            <dd><a href="http://docs.behat.org/api/behat/index.html">Behat API</a></dd>
        </dl>
        <dl>
            <dt>Plugins</dt>
            <dd><a href="http://symfony2bundles.org/Behat/BehatBundle">BehatBundle</a></dd>
            <dd><a href="https://github.com/Behat/sfBehatPlugin">sfBehatPlugin</a></dd>
        </dl>
        <dl>
            <dt>Pear</dt>
            <dd><a href="http://pear.everzet.com/">Gherkin</a></dd>
            <dd><a href="http://pear.everzet.com/">Behat</a></dd>
        </dl>
        <dl>
            <dt>GitHub</dt>
            <dd><a href="https://github.com/Behat/Gherkin">Gherkin</a></dd>
            <dd><a href="https://github.com/Behat/Behat">Behat</a></dd>
        </dl>

        <div class="clear"></div>

        <div class="sponsor">
            <span>sponsored by</span>
            <a class="knp" href="http://www.knplabs.com">knpLabs, Symfony developers</a>
        </div>
    </footer>

  </body>
</html>