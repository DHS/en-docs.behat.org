

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Multiline Arguments &mdash; Behat v1.1.0 documentation</title>
    <link rel="stylesheet" href="../_static/scrolls.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/behat.css" type="text/css" />
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Lobster" type="text/css" />
    <link rel="stylesheet" href="../_static/print.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/theme_extras.js"></script>
    <link rel="top" title="Behat v1.1.0 documentation" href="../index.html" />
    <link rel="next" title="Tags" href="tags.html" />
    <link rel="prev" title="Environment" href="../behat/environment.html" /> 
  </head>
  <body>
    <header>
        <a id="logo" href="http://behat.org">Behat</a>
        <nav>
            <ul>
                <li><a href="http://behat.org">main</a></li>
                <li class="active"><a href="http://docs.behat.org">docs</a></li>
                <li><a href="http://pear.behat.org">pear</a></li>
                <li><a href="https://github.com/Behat">github</a></li>
            </ul>
        </nav>
    </header>

    <section class="docs">

        <nav class="toc">
            <h3>Navigation</h3>
            <ul class="nav">
                <li><a href="../index.html">Behat Documentation</a></li>
                    <li><a href="../behat/environment.html">Environment</a> (prev)</li>
                    <li>
                        <a href="#">
                            Multiline Arguments
                        </a> (cur)
                    </li>
                    <li><a href="tags.html">Tags</a> (next)</li>
            </ul>

            <h3>Table Of Contents</h3>
            <ul>
<li><a class="reference internal" href="#">Multiline Arguments</a><ul>
<li><a class="reference internal" href="#tables">Tables</a></li>
<li><a class="reference internal" href="#multiline-strings">Multiline Strings</a></li>
</ul>
</li>
</ul>

        </nav>

        <section class="documentation">
            
  <div class="section" id="multiline-arguments">
<h1>Multiline Arguments<a class="headerlink" href="#multiline-arguments" title="Permalink to this headline">¶</a></h1>
<p>The regular expression matching in <a class="reference internal" href="steps.html"><em>Steps &amp; Step Definitions</em></a> lets you capture small strings from your
steps and receive them in your step definitions. However, there are times when you want to pass
a richer data structure from a step to a step definition.</p>
<p>This is what multiline step arguments are for. They are written on the lines right underneath a step,
and will be passed to definition callback as the last argument.</p>
<p>Multiline step arguments come in two flavours – tables or strings.</p>
<div class="section" id="tables">
<h2>Tables<a class="headerlink" href="#tables" title="Permalink to this headline">¶</a></h2>
<p>Tables as arguments to steps are handy for specifying a larger data set – usually as input to a Given or as expected output from a Then. (This is not to be confused with tables in <a class="reference internal" href="outlines.html"><em>Outlines</em></a> – syntactically identical, but with a different purpose). Example:</p>
<div class="highlight-gherkin"><div class="highlight"><pre><span class="k">Feature:</span><span class="nf"></span>

<span class="nf">    </span><span class="k">Scenario:</span><span class="nf"></span>
<span class="k">        Given </span><span class="nf">the following people exist:</span>
<span class="k">          |</span><span class="s"> name</span><span class="k">  |</span><span class="s"> email</span><span class="k">           |</span><span class="s"> phone</span><span class="k"> |</span><span class="nf"></span>
<span class="k">          |</span><span class="s"> Aslak</span><span class="k"> |</span><span class="s"> aslak@email.com</span><span class="k"> |</span><span class="s"> 123</span><span class="k">   |</span><span class="nf"></span>
<span class="k">          |</span><span class="s"> Joe</span><span class="k">   |</span><span class="s"> joe@email.com</span><span class="k">   |</span><span class="s"> 234</span><span class="k">   |</span><span class="nf"></span>
<span class="k">          |</span><span class="s"> Bryan</span><span class="k"> |</span><span class="s"> bryan@email.org</span><span class="k"> |</span><span class="s"> 456</span><span class="k">   |</span>
</pre></div>
</div>
<p>and a matching step definition:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
<span class="c1">// features/steps/name_steps.php</span>

<span class="nv">$steps</span><span class="o">-&gt;</span><span class="na">Given</span><span class="p">(</span><span class="s1">&#39;/^the following people exist:$/&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$world</span><span class="p">,</span> <span class="nv">$table</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$hash</span> <span class="o">=</span> <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">getHash</span><span class="p">();</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$hash</span> <span class="k">as</span> <span class="nv">$row</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">assertEquals</span><span class="p">(</span><span class="nv">$world</span><span class="o">-&gt;</span><span class="na">users</span><span class="p">[</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]]</span><span class="o">-&gt;</span><span class="na">getEmail</span><span class="p">(),</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">]);</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
<p>A plain text table gets stored in <tt class="docutils literal"><span class="pre">Behat\Gherkin\Node\TableNode</span></tt> instance, which provides several methods to access rows. Most common is <tt class="docutils literal"><span class="pre">-&gt;getHash()</span></tt> which returns hash representation of simple table and <cite>-&gt;getRowsHash()</cite>, which returns hash, created from rows.</p>
</div>
<div class="section" id="multiline-strings">
<h2>Multiline Strings<a class="headerlink" href="#multiline-strings" title="Permalink to this headline">¶</a></h2>
<p>Multiline Strings are handy for specifying a larger piece of text. This is done using the PyString syntax. (The inspiration for PyString comes from Python where <tt class="docutils literal"><span class="pre">&quot;&quot;&quot;</span></tt> is used to delineate docstrings.) The text should be offset by delimiters consisting of three double-quote marks on lines of their own:</p>
<div class="highlight-gherkin"><div class="highlight"><pre><span class="k">Feature:</span><span class="nf"></span>

<span class="nf">    </span><span class="k">Scenario:</span><span class="nf"></span>
<span class="k">        Given </span><span class="nf">a blog post named &quot;</span><span class="s">Random</span><span class="nf">&quot; with Markdown body</span>
<span class="nf">          </span><span class="k">&quot;&quot;&quot;</span><span class="s"></span>
<span class="s">          Some Title, Eh?</span>
<span class="s">          ==============</span>
<span class="s">          Here is the first paragraph of my blog post. Lorem ipsum dolor sit amet,</span>
<span class="s">          consectetur adipiscing elit.</span>
<span class="s">          </span><span class="k">&quot;&quot;&quot;</span><span class="nf"></span>
</pre></div>
</div>
<p>In your step definition, there’s no need to find this text and match it in your Regexp. It will automatically be passed as the last argument into the step definition callback. For example:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
<span class="c1">// features/steps/pystringarg_steps.php</span>

<span class="nv">$steps</span><span class="o">-&gt;</span><span class="na">Given</span><span class="p">(</span><span class="s1">&#39;/^a blog post named &quot;(.*?)&quot; with Markdown body$/&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$world</span><span class="p">,</span> <span class="nv">$title</span><span class="p">,</span> <span class="nv">$markdown</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">Post</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="nv">$title</span><span class="p">,</span> <span class="s1">&#39;body&#39;</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="nv">$markdown</span><span class="p">));</span>
<span class="p">});</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">PyStrings gets stored in PyStringNode instance, which you can simply convert to string with <tt class="docutils literal"><span class="pre">(string)</span> <span class="pre">$pystring</span></tt> as in example above.</p>
</div>
<p>Indentation of the opening <tt class="docutils literal"><span class="pre">&quot;&quot;&quot;</span></tt> is unimportant, although common practice is two spaces in from the enclosing step. The indentation inside the triple quotes, however, is significant. Each line of the string passed to the step definition’s callback will be de-indented according to the opening <tt class="docutils literal"><span class="pre">&quot;&quot;&quot;</span></tt>. Indentation beyond the column of the opening <tt class="docutils literal"><span class="pre">&quot;&quot;&quot;</span></tt> will therefore be preserved.</p>
</div>
</div>


        </section>

        <footer>
            <nav>
                    &laquo; <a href="../behat/environment.html">Environment</a> |
                    <a href="#">
                        Multiline Arguments
                    </a>
                    | <a href="tags.html">Tags</a> &raquo;
            </nav>
        </footer>

    </section>

    <footer>
        <dl>
            <dt>Docs</dt>
            <dd><a href="http://docs.behat.org/en/quick_intro.html">Quick Intro</a></dd>
            <dd><a href="http://docs.behat.org/en/index.html">Behat</a></dd>
            <dd><a href="http://docs.behat.org/api/gherkin/index.html">Gherkin API</a></dd>
            <dd><a href="http://docs.behat.org/api/behat/index.html">Behat API</a></dd>
        </dl>
        <dl>
            <dt>Plugins</dt>
            <dd><a href="http://symfony2bundles.org/Behat/BehatBundle">BehatBundle</a></dd>
            <dd><a href="https://github.com/Behat/sfBehatPlugin">sfBehatPlugin</a></dd>
        </dl>
        <dl>
            <dt>Pear</dt>
            <dd><a href="http://pear.everzet.com/">Gherkin</a></dd>
            <dd><a href="http://pear.everzet.com/">Behat</a></dd>
        </dl>
        <dl>
            <dt>GitHub</dt>
            <dd><a href="https://github.com/Behat/Gherkin">Gherkin</a></dd>
            <dd><a href="https://github.com/Behat/Behat">Behat</a></dd>
        </dl>

        <div class="clear"></div>

        <div class="sponsor">
            <span>sponsored by</span>
            <a class="knp" href="http://www.knplabs.com">knpLabs, Symfony developers</a>
        </div>
    </footer>

  </body>
</html>